# Задание 1

#### Для перехода с монолитного фронтенда на микро-фронтенды воспользуемся следующим Road-map 

## 1.1 Предварительный анализ
Над реализацией и поддержкой текущего решения работает опытная команда frontend разработчиков. 
Основными целями разбиения монолита являются:
- Ускорение процесса поставки фич на продуктовое окружение;
- Повышение отказоустойчивости в периоды пиковых нагрузок;
- Разделение большой команды на более мелкие со специфичными зонами ответственности.

## 1.2 Выделение бизнес функций
По результатам предварительного анализа, руководствуясь принципами DDD, были выделены следующие домены (модули), на которые в последующем будет происходить разделение системы:
- Модуль аутентификации и авторизации;
- Модуль управление контентом (карточками мест);
- Модуль управления профилем пользователя;
- Головной модуль: маршрутизация, загрузка зависимых модулей и т.д

## 1.3 Выбор инструментов
Для разделения монолитного фронтенда на микро-фронтенды был выбран плагин Module Federation по ряду причин:
-  Одинаковый стек технологий в каждом микро-фронтенде (JS/React);
-  Необходимость обновления отдельных модулей приложения; 
-  Простая настройка и порог вхождения (текущая команда знакома с данным плагином);
-  В перспективе некоторые модули (аутентификации и авторизации) будут выделяться в common для использования в других продуктах;
-  Отсутствие технически сложных и высоко интерактивных компонентов приложения, требующих использования разнообразных технологий.


## 1.4 Разделение кодовой базы

Базова структура микрофронтенда
```bash
├── microfrontend                                      # базовый каталог кодовой базы микро-фронтенда
│   ├── src
│   │   ├── App.jsx                                    # корневой компонент 
│   │   ├── components                                 # компоненты приложения
│   │   ├── index.css                                  # основная таблица стилей
│   │   ├── index.html                                 # основная страница
│   │   ├── index.js                                   # входная точка
│   │   ├── styles                                     # каталог со стилями
│   │   ├── static                                     # каталог со статическими данными (изображения, файлы данных и пр.)
│   │   └── utils                                      # утилитарные компоненты (вызов стороннего API и т.п)
│   └── webpack.config.js                              # Конфигурация Webpack (подключение удаленных модулей, экспорт)
````

Результат разбиения проекта Mesto на микро-фронтенды:
```bash
.
├── auth-microfrontend                                # микро-фронтенд авторизации и аутентификации
│   ├── src
│   │   ├── App.jsx
│   │   ├── components
│   │   │   ├── Login.js                              # Вход пользователя
│   │   │   └── Register.js                           # Регистрация нового пользователя
│   │   ├── index.css
│   │   ├── index.html
│   │   ├── index.js
│   │   ├── styles
│   │   └── utils
│   │       └── auth.js                               # Утилитарный компонент для вызова внешнего сервиса аутентификации
│   └── webpack.config.js
├── host                                              # головной микро-фронтенд
│   ├── src
│   │   ├── App.jsx
│   │   ├── components
│   │   │   ├── App.js                                # Головной компонент: инициализация текущего пользовательского контекста, регистрация основных хэндлеров и т.п
│   │   │   ├── CurrentUserContext.js                 # Объект пользовательского контекста
│   │   │   ├── Footer.js                             # Футер
│   │   │   ├── Header.js                             # Хэдер
│   │   │   ├── InfoTooltip.js                        # Компонент информационного сообщения: ошибка или успех в зависимости от статуса
│   │   │   ├── Main.js                               # Компонент главной страницы приложения (карточки + информация о профиле)
│   │   │   ├── PopupWithForm.js                      # Всплывающее окно сохранения изменений
│   │   │   └── ProtectedRoute.js                     # Компонент роутинга на страницу входа (зона авторизации задается в App.js)
│   │   ├── index.css
│   │   ├── index.html
│   │   ├── index.js
│   │   ├── static
│   │   ├── styles
│   │   └── utils
│   └── webpack.config.js
├── photo-microfrontend                               # микро-фронтенд управления контентом (карточками мест)
│   ├── src
│   │   ├── App.jsx
│   │   ├── components
│   │   │   ├── AddPlacePopup.js                      # Компонент добавления\изменения карточки
│   │   │   ├── Card.js                               # Компонент удаления карточки и простановки лайков
│   │   │   └── ImagePopup.js                         # Всплывающее окно отображения карточки
│   │   ├── index.css
│   │   ├── index.html
│   │   ├── index.js
│   │   ├── static
│   │   ├── styles
│   │   └── utils
│   └── webpack.config.js
└── profile-microfrontend                             # микро-фронтенд управления профилем пользователя
    ├── src
    │   ├── App.jsx
    │   ├── components
    │   │   ├── EditAvatarPopup.js                    # Всплывающее окно смены аватара в профиле пользователя
    │   │   └── EditProfilePopup.js                   # Всплывающее окно редактирование профиля пользователя (имя, описание)
    │   ├── index.css
    │   ├── index.html
    │   ├── index.js
    │   ├── static
    │   ├── styles
    │   └── utils
    └── webpack.config.js
```

# Задание 2

Ссылка на схему draw.io -- https://disk.yandex.ru/d/MQP-HCssU8b7yg

Так же схему можно найти в корне репозитория -- https://github.com/Gruv1800/architecture-sprint-1/blob/sprint_1/sprint_1_task_2.drawio